# AutoImplementation.CodeGeneration

Source Generator que cria automaticamente implementações concretas (records/classes) para interfaces anotadas com o atributo `GenerateImplementationAttribute`.

## Como usar

### 1. Anote sua interface

Use o atributo `[GenerateImplementation]` em interfaces para gerar automaticamente uma implementação concreta:

```csharp
using AutoImplementation.CodeGeneration;

[GenerateImplementation]
public interface IPerson
{
    string Name { get; }
    int Age { get; }
    string Email { get; }
}
```

### 2. Código gerado automaticamente

O Source Generator criará automaticamente uma implementação:

```csharp
// <auto-generated/>
public partial record Person : IPerson
{
    public required string Name { get; init; }
    public required int Age { get; init; }
    public required string Email { get; init; }
}
```

### 3. Use a implementação gerada

```csharp
var person = new Person 
{ 
    Name = "João", 
    Age = 30, 
    Email = "joao@example.com" 
};
```

## Opções do atributo

O atributo `GenerateImplementationAttribute` aceita dois parâmetros opcionais:

### Parâmetro `className`

Define o nome da classe/record gerada. Se não especificado, remove o prefixo 'I' do nome da interface:

```csharp
[GenerateImplementation("Customer")]
public interface IUser
{
    string Name { get; }
}

// Gera: public partial record Customer : IUser
```

### Parâmetro `useRecord`

Define se deve gerar um `record` (padrão: `true`) ou uma `class` (quando `false`):

```csharp
[GenerateImplementation(useRecord: false)]
public interface IPerson
{
    string Name { get; }
    int Age { get; }
}

// Gera uma class com propriedades required:
public partial class Person : IPerson
{
    public required string Name { get; init; }
    public required int Age { get; init; }
}
```

### Combinando ambos os parâmetros

```csharp
[GenerateImplementation("Employee", useRecord: false)]
public interface IPerson
{
    string Name { get; }
    string Department { get; }
}

// Gera: public partial class Employee : IPerson
```

## Recursos suportados

### ✅ Propriedades
- Propriedades get-only são geradas com `required` e `init`
- Suporte completo a tipos complexos e genéricos

### ✅ Métodos
- Métodos são gerados com `throw new NotImplementedException()`
- Suporte a parâmetros `ref`, `out`, `in`
- Suporte a valores padrão de parâmetros

### ✅ Eventos
- Eventos são gerados como propriedades de evento padrão

### ⚠️ Indexers
- Indexers são suportados mas geram `NotImplementedException`
- Um diagnóstico informativo é emitido para indexers

## Exemplos avançados

### Interface com métodos

```csharp
[GenerateImplementation]
public interface ICalculator
{
    double Result { get; }
    void Add(double value);
    void Subtract(double value);
    void Clear();
}

// Gera um record com propriedades required e métodos com NotImplementedException
```

### Interface com eventos

```csharp
[GenerateImplementation]
public interface INotifier
{
    string Message { get; }
    event Action<string> OnNotification;
    void Notify(string message);
}
```

### Interface genérica

```csharp
[GenerateImplementation]
public interface IRepository<T>
{
    IEnumerable<T> Items { get; }
    void Add(T item);
    T? GetById(int id);
}

// Gera: public partial record Repository<T> : IRepository<T>
```

## Notas importantes

- As implementações geradas são **parciais**, permitindo extensão manual
- Propriedades são geradas com `required` para garantir inicialização
- Use object initializers para instanciar os tipos gerados
- Métodos sempre lançam `NotImplementedException` e devem ser implementados manualmente se necessário

## Diagnósticos

O Source Generator emite diagnósticos informativos:

- **GI0001**: Informa quando indexers são encontrados em interfaces (eles são gerados com `NotImplementedException`)

## Compatibilidade

- **.NET Standard 2.0+**
- **C# 9.0+** (para suporte a records e propriedades required)
- Funciona com qualquer projeto que suporte Source Generators